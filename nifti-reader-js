<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>NIfTI Viewer</title>
    <script src="nifti-reader-min.js"></script>
</head>
<body>
    <h1>NIfTI Viewer Setup</h1>
    <script>
        // Example of using nifti-reader-js
        // This assumes you have a way to load NIfTI files into the browser, e.g., via a file input
        function handleFileSelect(evt) {
            var files = evt.target.files; // FileList object

            // files is a FileList of File objects. List some properties.
            var output = [];
            for (var i = 0, f; f = files[i]; i++) {
                var reader = new FileReader();
                
                reader.onload = (function(theFile) {
                    return function(e) {
                        if (nifti.isNIFTI(theFile.name)) {
                            var niftiHeader = nifti.readHeader(e.target.result);
                            var niftiImage = nifti.readImage(niftiHeader, e.target.result);
                            console.log(niftiHeader);
                            console.log(niftiImage);
                        } else {
                            console.log("Not a valid NIFTI file.");
                        }
                    };
                })(f);

                reader.readAsArrayBuffer(f);
            }
        }

        document.getElementById('files').addEventListener('change', handleFileSelect, false);
    </script>
    <input type="file" id="files" name="files[]" multiple />
</body>
</html>
