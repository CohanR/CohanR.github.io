<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Remy's NIfTI Viewer</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <link rel="stylesheet" type="text/css" href="papaya.css?build=1456">
    <script type="text/javascript" src="papaya.js?build=1456"></script>
    <style>
        body, html {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f4f4f4;
            height: 100vh; /* Full viewport height */
            display: flex;
            flex-direction: row; /* Row layout to accommodate instructions column */
            overflow: hidden; /* No scrolling on the page */
        }
        .sidebar {
            width: 20%; /* Sidebar width for instructions */
            padding: 2vh;
            background: #ffffff;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            margin: 1vh;
            margin-top: 3.5vh; /* Adjust top margin to separate from the home button */
            overflow-y: auto; /* Enable scrolling for the sidebar */
        }
        .content {
            width: 75%;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        #papayaContainer {
            width: 100%;
            height: 60vh; /* Adjusted to better fit without scrolling */
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            margin: 1vh 0; /* Small vertical margin */
        }
        .info {
            width: 100%;
            text-align: center;
            background: #ffffff;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            padding: 1vh; /* Small padding for aesthetics */
        }
        .home-button {
            position: absolute;
            top: 10px;
            left: 10px;
            padding: 10px 20px;
            background-color: #007BFF;
            color: white;
            border-radius: 5px;
            text-decoration: none;
            z-index: 10;
        }
        @media (max-width: 768px) {
            body, html {
                flex-direction: column;
            }
            .sidebar {
                width: 100%;
                margin: 1vh 0;
                margin-top: 3.5vh;
                height: 30vh;
            }
            .content {
                width: 100%;
            }
            #papayaContainer {
                height: 50vh;
            }
        }
        @media (max-width: 480px) {
            .sidebar {
                height: 35vh;
                padding: 1vh;
                margin-top: 3.5vh;
            }
            #papayaContainer {
                height: 45vh;
            }
            .info {
                padding: 0.5vh;
            }
        }
    </style>
</head>
<body>
    <a href="index.html" class="home-button">Home</a>
    <div class="sidebar">
        <h3>Instructions</h3>
        <p>This viewer is pre-loaded with the MNI 152 standard brain. Hover or click on the brain to see anatomical labels.</p>
        <p>To load your own image:</p>
        <ol>
            <li>Click on <strong>File</strong></li>
            <li>Click on <strong>Close ALL</strong></li>
        </ol>
        <p>You should see a black screen. You can now drag and drop the MRI file that ends with <code>.nii.gz</code> onto the black window, or you can click on <strong>File</strong> and then <strong>Add Image</strong>.</p>
        <p>Make sure to use <strong>Close ALL</strong> if you wish to see a different image. Otherwise, the previous image remains there and the new image you add overlays on top.</p>
        <p>You can now click on different parts of the image or scroll up and down to explore the image and go through different volumes.</p>
    </div>
    <div class="content">
        <div id="papayaContainer" data-params="params"></div>
        <div class="info">
            <p>You can also use the 'File' menu to 'Close All' and upload your own DICOM or NIfTI MRI image. If your MRI file is normalized to MNI space, the MNI template overlay will automatically add region labels to your image.</p>
        </div>
    </div>

    <script type="text/javascript">
        var params = {
            "images": ["images/mni152.nii.gz"],
            "worldSpace": true,
            "showControls": true
        };

        window.onload = function() {
            papaya.Container.resetViewer(0, params);
            // Ensure only the viewer consumes the scroll when hovered over
            document.getElementById('papayaContainer').addEventListener('mouseenter', function() {
                document.body.style.overflow = 'hidden'; // Disable scrolling on the body when hovering over the viewer
            });
            document.getElementById('papayaContainer').addEventListener('mouseleave', function() {
                document.body.style.overflow = 'hidden'; // Keep body scrolling disabled
            });
        };
    </script>
</body>
</html>
